---
subtitle: –®–∏–∫–∞–Ω –ê–ª–µ–∫—Å–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á –ò–°-21
title: "**–û—Ç—á–µ—Ç –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ ‚Ññ1: –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
  –Ω–∞ Debian.**"
---

1.  **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã**

–®–∞–≥ 1. –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è
–º–∞—à–∏–Ω–∞ –≤ VirtualBox.

–®–∞–≥ 2. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ –ø–æ–¥ –æ–±—ã—á–Ω—ã–º
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (user). –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–µ–º
–∫–æ–º–∞–Ω–¥—É:

su -

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø –±—ã–ª –ø–æ–ª—É—á–µ–Ω –∫ root-–∞–∫–∫–∞—É–Ω—Ç—É, —á—Ç–æ
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π root@DEBIAN:\~#.

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image1.png){width="6.496527777777778in"
height="0.7018405511811023in"}

–®–∞–≥ 3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –∏
–≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª–µ–¥—É—é—â—É—é
–∫–æ–º–∞–Ω–¥—É:

apt-get update && apt-get upgrade

–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:

-   apt-get update -- –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –∏—Ö –≤–µ—Ä—Å–∏–π –∏–∑
    —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤. –≠—Ç–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–∞–º–∏ –ø–∞–∫–µ—Ç—ã, –∞ —Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç
    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö.

-   apt-get upgrade -- –æ–±–Ω–æ–≤–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
    –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–µ—Ä—Å–∏–π, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image2.png){width="6.496527777777778in"
height="1.765262467191601in"}

2.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL**

–®–∞–≥ 1. –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:

sudo apt-get install postgresql

–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:

-   sudo --- –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

-   apt-get install postgresql --- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ PostgreSQL –∏–∑
    –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ Debian.

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image3.png){width="6.496527777777778in"
height="3.2121719160104987in"}

–®–∞–≥ 2. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –±—ã–ª–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è
—É—Ç–∏–ª–∏—Ç–∞ postgresql-client –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª.

sudo apt-get install postgresql-client

–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:

-   sudo --- –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

-   apt-get install postgresql-client --- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —É—Ç–∏–ª–∏—Ç
    PostgreSQL.

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image4.png){width="6.496527777777778in"
height="2.676920384951881in"}

3.  **–°–æ–∑–¥–∞–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏**

–®–∞–≥ 1. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞

id postgres

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image5.png){width="6.496527777777778in"
height="0.342341426071741in"}

–†–µ–∑—É–ª—å—Ç–∞—Ç:

-   uid=112(postgres) -- —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (User
    ID).

-   gid=122(postgres) -- –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã (Group ID).

-   groups=122(postgres),110(ssl-cert) -- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å postgres —Ç–∞–∫–∂–µ
    –≤—Ö–æ–¥–∏—Ç –≤ –≥—Ä—É–ø–ø—É ssl-cert, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å
    —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ SSL.

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ postgres:

-   –≠—Ç–æ —Å–ª—É–∂–µ–±–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
    PostgreSQL.

-   –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª—É–∂–±—ã PostgreSQL –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–∞–º–∏
    –¥–∞–Ω–Ω—ã—Ö.

-   –î–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–º–µ–µ—Ç –ø–∞—Ä–æ–ª—è –∏ –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, –Ω–æ
    –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL —á–µ—Ä–µ–∑ sudo -u
    postgres.

–®–∞–≥ 2. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–ª—É–∂–±–∞ –±–∞–∑—ã
–¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç.

–î–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

systemctl start postgresql

systemctl status postgresql

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image6.png){width="6.496527777777778in"
height="1.5681266404199474in"}

–†–µ–∑—É–ª—å—Ç–∞—Ç:

-   –°–µ—Ä–≤–∏—Å postgresql.service –∑–∞–≥—Ä—É–∂–µ–Ω (loaded).

-   –°—Ç–∞—Ç—É—Å Active (exited), —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏
    —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

-   –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–µ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (enabled; preset:
    enabled).

üîπ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∞–≤–∞:

-   –£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å postgres –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ PostgreSQL.

-   –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã PostgreSQL –≤ —Å–∏—Å—Ç–µ–º–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ —ç—Ç–æ–≥–æ
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

-   –û–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
    root –≤ —Å–∏—Å—Ç–µ–º–µ.

4.  **–ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ PostgreSQL –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –±–∞–∑–æ–≤—É—é
–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∏–∑–º–µ–Ω–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–®–∞–≥ 1. PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ
–Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ: /etc/postgresql/15/main/

–ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã:

-   postgresql.conf --- –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
    PostgreSQL.

-   pg_hba.conf --- —Ñ–∞–π–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

-   pg_ident.conf --- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –û–° —Å
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ PostgreSQL.

–®–∞–≥ 2. –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
–≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:

sudo -i -u postgres

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image7.png){width="6.496527777777778in"
height="0.2890912073490814in"}

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –§–∞–π–ª –æ—Ç–∫—Ä—ã—Ç –≤
—Ä–µ–¥–∞–∫—Ç–æ—Ä–µ nano:

sudo nano /etc/postgresql/15/main/postgresql.conf\\

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image8.png){width="6.496527777777778in"
height="6.8615004374453195in"}

–ò–∑–º–µ–Ω–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ—Ä—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL: port = 5433

–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 5432, –Ω–æ –µ–≥–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å,
–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ 5433, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ PostgreSQL
–Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ.

–®–∞–≥ 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ pg_hba.conf.

–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª:

sudo nano /etc/postgresql/15/main/pg_hba.conf

–ò–∑–º–µ–Ω–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image9.png){width="6.496527777777778in"
height="3.34839457567804in"}

–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?

-   trust --- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Ö–æ–¥ –±–µ–∑ –ø–∞—Ä–æ–ª—è (—É–¥–æ–±–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏).

-   md5 --- —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å, –∑–∞—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º MD5.

-   scram-sha-256 --- –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.

-   peer --- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Linux —Å
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º PostgreSQL. –ï—Å–ª–∏ –∏–º–µ–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç -- –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è.

–¢–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image10.png){width="6.496527777777778in"
height="0.24620516185476815in"}

–®–∞–≥ 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑:

netstat -tuln \| grep 5433

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É

ss -tuln \| grep 5433

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image11.png){width="6.496527777777778in"
height="1.0370439632545931in"}

5.  **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º**

–®–∞–≥ 1. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è PostgreSQL –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:

sudo systemctl status postgresql

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image12.png){width="6.496527777777778in"
height="1.5891371391076115in"}

–®–∞–≥ 2. –ß—Ç–æ–±—ã PostgreSQL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã,
–≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞

sudo systemctl enable postgresql

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image13.png){width="6.496527777777778in"
height="0.9507108486439195in"}

–†–µ–∑—É–ª—å—Ç–∞—Ç:

-   Systemd –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —É—Å–ø–µ—à–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ
    –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞.

-   –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

systemctl is-enabled postgresql

–®–∞–≥ 3. –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω, –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:

sudo systemctl start postgresql

–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏):

sudo systemctl restart postgresql

–î–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞:

sudo systemctl stop postgresql

6.  **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

–®–∞–≥ 1. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ postgres —É–∫–∞–∑—ã–≤–∞—è localhost –∏ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç 5433

psql -h localhost -p 5433 -U postgres

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image14.png){width="6.496527777777778in"
height="0.9556069553805774in"}

–®–∞–≥ 2. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ psql –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:

CREATE USER sav WITH PASSWORD \'12345\';

–®–∞–≥ 3. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:

CREATE DATABASE bd1 OWNER sav;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image15.png){width="6.496527777777778in"
height="1.253015091863517in"}

–®–∞–≥ 4. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ PostgreSQL, –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
–∫–æ–º–∞–Ω–¥–∞:

\\du

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image16.png){width="6.496527777777778in"
height="1.0278805774278215in"}

–®–∞–≥ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:

\\l

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image17.png){width="6.496527777777778in"
height="3.1046052055993in"}

7.  **–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å–æ —Å—Ö–µ–º–∞–º–∏**

–í PostgreSQL —Å—Ö–µ–º–∞ -- —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
(—Ç–∞–±–ª–∏—Ü, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π, –∏–Ω–¥–µ–∫—Å–æ–≤, —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ç. –¥.).

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -- —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ö–µ–º.

–°—Ö–µ–º–∞ -- —ç—Ç–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è:

-   –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -- —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞.

-   –°—Ö–µ–º—ã -- —ç—Ç–æ —Ä–∞–∑–¥–µ–ª—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞—É—á–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è,
    —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏).

-   –¢–∞–±–ª–∏—Ü—ã -- —ç—Ç–æ –∫–Ω–∏–≥–∏ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–∞–∂–¥–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–∞ public, –≤ –∫–æ—Ç–æ—Ä–æ–π
—Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –¥—Ä—É–≥–∞—è —Å—Ö–µ–º–∞.

–®–∞–≥ 1. –°–æ–∑–¥–∞–¥–∏–º —Å—Ö–µ–º—É test_schema

CREATE SCHEMA test_schema;

–ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å sav –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ö–µ–º—É, –Ω—É–∂–Ω–æ –¥–∞—Ç—å –µ–º—É –ø—Ä–∞–≤–∞:

GRANT USAGE ON SCHEMA test_schema TO sav;

GRANT CREATE ON SCHEMA test_schema TO sav;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image18.png){width="6.496527777777778in"
height="1.0143274278215224in"}

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

-   USAGE -- –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å—Ö–µ–º—ã.

-   CREATE -- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Å—Ö–µ–º—ã.

–®–∞–≥ 2. –°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É schema_table –≤ —Å—Ö–µ–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

CREATE TABLE \"schema_table\" (

\"id\" int PRIMARY KEY,

\"text\" text

);

–ü–µ—Ä–µ–º–µ—Å—Ç–∏–º –µ—ë –≤ test_schema:

ALTER TABLE schema_table SET SCHEMA test_schema;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image19.png){width="6.496527777777778in"
height="1.3745548993875765in"}

–®–∞–≥ 3. –í PostgreSQL, –µ—Å–ª–∏ —Å—Ö–µ–º–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —è–≤–Ω–æ, –ø–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤
–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å—Ö–µ–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (public). –ß—Ç–æ–±—ã –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç–∞–±–ª–∏—Ü–µ –≤
–¥—Ä—É–≥–æ–π —Å—Ö–µ–º–µ, –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –µ—ë –ø–æ–ª–Ω–æ–µ –∏–º—è:

SELECT \* FROM test_schema.schema_table;

–®–∞–≥ 4. (–î–æ–ø) –†–∞–±–æ—Ç–∞ —Å search_path

–ß—Ç–æ–±—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ–±—ä–µ–∫—Ç–∞–º —Å—Ö–µ–º—ã –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Å—Ö–µ–º—ã, –º–æ–∂–Ω–æ
–∏–∑–º–µ–Ω–∏—Ç—å search_path:

SET search_path TO test_schema;

–¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞:

SELECT \* FROM schema_table;

–±—É–¥–µ—Ç —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞:

SELECT \* FROM test_schema.schema_table;

8.  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã psql –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**

–®–∞–≥ 1. –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É pub_table –≤ —Å—Ö–µ–º–µ public:

CREATE TABLE public.pub_table (

\"id\" int PRIMARY KEY,

\"text\" text

);

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image20.png){width="6.496527777777778in"
height="0.3631594488188976in"}

–®–∞–≥ 2. –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—É:

INSERT INTO public.pub_table (id, text) VALUES

(1, \'111\'),

(2, \'222\'),

(3, \'333\');

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image21.png){width="6.496527777777778in"
height="0.3196314523184602in"}

–®–∞–≥ 3. –í—ã–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ public.pub_table:

SELECT \* FROM public.pub_table;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image22.png){width="6.496527777777778in"
height="1.1157895888013998in"}

–®–∞–≥ 4. –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ text –¥–ª—è —Å—Ç—Ä–æ–∫–∏ —Å id=2:

UPDATE public.pub_table SET text = \'change_me\' WHERE id = 2;

–®–∞–≥ 5. –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å —Å id=3:

DELETE FROM public.pub_table WHERE id = 3;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image23.png){width="6.496527777777778in"
height="1.7180238407699038in"}

–®–∞–≥ 6. –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É new_table –≤ —Å—Ö–µ–º–µ test_schema:

CREATE TABLE test_schema.new_table (

\"id\" int PRIMARY KEY,

\"text\" text

);

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image24.png){width="6.496527777777778in"
height="0.3684831583552056in"}

–®–∞–≥ 7. –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å–∏ –≤ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É:

INSERT INTO test_schema.new_table (id, text) VALUES

(1, \'111\'),

(2, \'222\'),

(3, \'333\');

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image25.png){width="6.496527777777778in"
height="0.3507327209098863in"}

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image26.png){width="6.496527777777778in"
height="1.1797167541557305in"}

9.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**

–®–∞–≥ 1. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é PostgreSQL —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
(localhost). –ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏—Ö –º–∞—à–∏–Ω, –∏–∑–º–µ–Ω—è–µ–º
–ø–∞—Ä–∞–º–µ—Ç—Ä listen_addresses –≤ —Ñ–∞–π–ª–µ postgresql.conf:

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image27.png){width="6.496527777777778in"
height="0.696913823272091in"}

–í–∞–∂–Ω–æ, –ø–æ—Å–ª–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL.

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

-   localhost -- —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞.

-   \* -- —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –ª—é–±—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤.

–®–∞–≥ 2. –§–∞–π–ª /etc/postgresql/15/main/pg_hba.conf —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º–∏
–¥–æ—Å—Ç—É–ø–∞ –∫ PostgreSQL. –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É, —Ä–∞–∑—Ä–µ—à–∞—é—â—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ
–ø–∞—Ä–æ–ª—é —Å –ª—é–±–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞:

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image28.png){width="6.496527777777778in"
height="1.2576498250218722in"}

–í–∞–∂–Ω–æ, –ø–æ—Å–ª–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL.

–†–∞–∑–±–∏—Ä–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É:

-   host -- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ TCP/IP.

-   all -- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –ª—é–±—ã–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö.

-   all -- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

-   0.0.0.0/0 -- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ª—é–±–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞.

-   md5 -- —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ø–∞—Ä–æ–ª—é.

–®–∞–≥ 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã—Ö –ø–æ—Ä—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

sudo ss -tulnp \| grep postgres

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image29.png){width="6.496527777777778in"
height="0.6637751531058618in"}

–®–∞–≥ 4. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –≤—ã–ø–æ–ª–Ω–∏–º:

hostname -I

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image30.png){width="6.496527777777778in"
height="0.39590988626421697in"}

–®–∞–≥ 5. –ó–∞–ø—É—Å–∫–∞–µ–º DBeaver –∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image31.png){width="6.496527777777778in"
height="3.6492213473315838in"}

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image32.png){width="6.496527777777778in"
height="5.821562773403325in"}

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image33.png){width="4.395833333333333in"
height="4.520833333333333in"}

10. **–ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (logging)**

–®–∞–≥ 1. –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: sudo nano
/etc/postgresql/15/main/postgresql.conf\\

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image34.png){width="6.496527777777778in"
height="3.2721095800524935in"}

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

-   logging_collector = on -- –≤–∫–ª—é—á–∞–µ—Ç —Å–±–æ—Ä –ª–æ–≥–æ–≤.

-   log_directory = \'log\' -- –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤
    PGDATA/log).

-   log_filename = \'postgresql-%Y-%m-%d\_%H%M%S.log\' -- –ª–æ–≥-—Ñ–∞–π–ª —Å
    —Ç–∞–π–º—Å—Ç–∞–º–ø–æ–º.

-   log_min_messages = info -- –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —É—Ä–æ–≤–Ω—è INFO –∏
    –≤—ã—à–µ.

-   log_statement = \'all\' -- –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ SQL-–∑–∞–ø—Ä–æ—Å—ã.

-   log_timezone = \'Asia/Krasnoyarsk\' -- —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å.

–í–∞–∂–Ω–æ, –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL.

–®–∞–≥ 2. –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:

log_line_prefix = \'%t \[%p\]: \[%l-1\] user=%u, db=%d, app=%a,
client=%h \'

–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

-   %t -- –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞.

-   %p -- PID –ø—Ä–æ—Ü–µ—Å—Å–∞ PostgreSQL.

-   %l -- –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞.

-   %u -- –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

-   %d -- –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

-   %a -- –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–µ–ª –∑–∞–ø—Ä–æ—Å.

-   %h -- IP-–∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞.

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image35.png){width="6.496527777777778in"
height="1.2804516622922135in"}

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image36.png){width="6.496527777777778in"
height="1.1473578302712162in"}

–®–∞–≥ 3. –ù–∞—Ö–æ–¥–∏–º –ø–∞–ø–∫—É —Å –ª–æ–≥–∞–º–∏:

ls /var/lib/postgresql/15/main/log/

–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞:

tail -f /var/lib/postgresql/15/main/log/postgresql-\*.log

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image37.png){width="6.496527777777778in"
height="0.4955632108486439in"}

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image38.png){width="6.496527777777778in"
height="1.5154746281714786in"}

–®–∞–≥ 4. –ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ PostgreSQL –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ
–∑–∞–ø—É—Å–∫–µ:

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image39.png){width="6.496527777777778in"
height="1.4422287839020123in"}

11. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤**

–®–∞–≥ 1. –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è lim_u —Å –ø–∞—Ä–æ–ª–µ–º:

CREATE ROLE lim_u WITH LOGIN PASSWORD \'–ø–∞—Ä–æ–ª—å\';

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image40.png){width="6.496527777777778in"
height="1.8542847769028872in"}

–®–∞–≥ 2. –°–æ—â–¥–∞–µ–º –±–∞–∑—É test_bd –∏ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –Ω–µ–π:\\

CREATE DATABASE test_bd;

\\c test_bd

–®–∞–≥ 3. –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É test_t:

–®–∞–≥ 4. –í—ã–¥–∞–ª–∏ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã test_t::

GRANT CONNECT ON DATABASE test_bd TO lim_u;

GRANT SELECT ON test_t TO lim_u;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image41.png){width="6.496527777777778in"
height="1.8035126859142607in"}

–®–∞–≥ 5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É test_t —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã \\z test_t:

\\z test_t

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image42.png){width="6.496527777777778in"
height="1.987937445319335in"}

–®–∞–≥ 6. –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å man, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ lim_u:

CREATE ROLE man WITH LOGIN PASSWORD \'12345\';

GRANT man TO lim_u;

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image43.png){width="6.496527777777778in"
height="0.4212587489063867in"}

–®–∞–≥ 7. –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É test_t –≤ –±–∞–∑–µ test_bd:

INSERT INTO test_t (name) VALUES (\'proverka\');

![](vertopal_f5400db0f4044d229e4a1c62d5505929/media/image44.png){width="6.496527777777778in"
height="0.15418963254593177in"}
